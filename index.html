<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ©ç›Šæ¼”ç¤ºè¡¨</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script>window.injectInfo = { env: "PROD" };</script>
    <script>window.publicPath = "https://gw.alipayobjects.com/render/p/yuyan/180023180006000310/";</script>
    <script defer src="https://cdn.tailwindcss.com"></script>
    <style>
/* äº¤è´¹æœŸé—´æŒ‰é’®æ•°æ®å¯ç”¨æ€§æŒ‡ç¤ºç‚¹ */
.payment-button .absolute {
    pointer-events: none;
}

/* æ•°æ®å¯ç”¨æ€§é¢œè‰²ç¼–ç  */
.bg-green-500 { background-color: #10b981; } /* æ•°æ®å®Œæ•´ */
.bg-yellow-500 { background-color: #f59e0b; } /* æ•°æ®éƒ¨åˆ† */
.bg-gray-400 { background-color: #9ca3af; } /* æ•°æ®æš‚ç¼º */

/* åˆ—æ˜¾ç¤º/éšè—æ§åˆ¶ */
.annuity-column, .bonus-column {
    display: table-cell;
}

/* ä¹…ä¹…é™©ç§ï¼šéšè—å¹´é‡‘åˆ— */
.product-forever .annuity-column {
    display: none;
}

/* æ»¡æ»¡é™©ç§ï¼šéšè—çº¢åˆ©åˆ— */
.product-full .bonus-column {
    display: none;
}

/* å¹´å¹´é™©ç§ï¼šæ˜¾ç¤ºæ‰€æœ‰åˆ— */
.product-year .annuity-column,
.product-year .bonus-column {
    display: table-cell;
}

/* æ¨¡æ€æ¡†æ ·å¼ */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.modal.hidden {
    display: none;
}

.modal-content {
    background: white;
    border-radius: 8px;
    padding: 0;
    max-width: 500px;
    width: 90%;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
}

.modal-header {
    padding: 20px 20px 10px;
    border-bottom: 1px solid #eee;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-header h3 {
    margin: 0;
    font-size: 18px;
    color: #1f2937;
}

.close-modal {
    font-size: 24px;
    cursor: pointer;
    color: #6b7280;
}

.close-modal:hover {
    color: #374151;
}

.modal-body {
    padding: 20px;
    max-height: 300px;
    overflow-y: auto;
}

.modal-footer {
    padding: 10px 20px 20px;
    text-align: right;
}

/* æ›´æ–°æ—¥å¿—åˆ—è¡¨æ ·å¼ */
#changelogList {
    list-style: none;
    padding: 0;
    margin: 0;
}

#changelogList li {
    padding: 10px 0;
    border-bottom: 1px solid #f0f0f0;
    font-size: 14px;
    line-height: 1.5;
}

#changelogList li:last-child {
    border-bottom: none;
}

.changelog-date {
    font-weight: 600;
    color: #3b82f6;
    display: block;
    margin-bottom: 4px;
}

.changelog-content {
    color: #374151;
}

        /* å ä½ç¬¦è¡Œæ ·å¼ */
        .placeholder-row {
            background-color: #f9f9f9 !important;
            color: #999 !important;
            font-style: italic !important;
        }

        /* è¡¨æ ¼å®¹å™¨ */
        .table-container {
            max-height: 780px;
            max-width: 100vw; /* å…è®¸æ’‘æ»¡è§†å£å®½åº¦ */
            overflow: auto;
            border: 1px solid #ddd;
            margin-top: 10px;
            position: relative;
        }

        /* è¡¨æ ¼ */
        .result-table {
            border-collapse: collapse;
            table-layout: fixed;
            width: 100%;
            min-width: auto !important; /* ç§»é™¤å›ºå®šæœ€å°å®½åº¦ */
            width: 100%;
            table-layout: auto; /* æ”¹ä¸ºè‡ªåŠ¨å¸ƒå±€ï¼Œæ›´çµæ´» */;
        }

        /* å†»ç»“è¡¨å¤´ */
        .result-table thead th {
            position: sticky;
            top: 0;
            z-index: 20;
            background: #f8f9fa;
            border-bottom: 2px solid #ddd;
            font-weight: 600;
        }

        /* å†»ç»“ç¬¬ä¸€åˆ— */
        .result-table th:first-child,
        .result-table td:first-child {
            position: sticky;
            left: 0;
            z-index: 15;
            background: #f8f9fa;
            border-right: 2px solid #ddd;
        }

        /* å·¦ä¸Šè§’å•å…ƒæ ¼ç‰¹æ®Šå¤„ç† - åŒæ—¶å†»ç»“è¡Œå’Œåˆ— */
        .result-table thead th:first-child {
            z-index: 25;
            left: 0;
            background: #e9ecef;
        }

        /* åŸºæœ¬æ ·å¼ */
        .result-table th, .result-table td {
            padding: 6px 8px;
            border: 1px solid #ddd;
            text-align: right;
            white-space: nowrap;
            font-size: 12px;
            min-width: 50px;
        }

        .result-table th:first-child,
        .result-table td:first-child {
            text-align: center;
            min-width: 40px;
        }

        .result-table th:nth-child(2),
        .result-table td:nth-child(2) {
            text-align: center;
            min-width: 40px;
        }

        .result-table tbody tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .result-table tbody tr:hover {
            background-color: #f0f7ff;
        }

        /* ç¡®ä¿å†»ç»“åˆ—åœ¨æ‚¬æµ®æ—¶ä¹Ÿæœ‰èƒŒæ™¯è‰² */
        .result-table tbody tr:hover td:first-child {
            background-color: #e6f3ff;
        }

        /* è¡¨æ ¼æ ·å¼ä¼˜åŒ– */
        .result-table {
            width: 100%;
            border-collapse: collapse;
        }

        body {
            background-color: #f8f9fa;
        }
        .container {
            margin: 0;
            padding: 16px;
            border-radius: 8px;
        }
        .premium-button {
            transition: all 0.2s ease;
        }
        .premium-button:hover {
            transform: scale(1.05);
        }
        .premium-button.active {
            background-color: #3b82f6;
            color: white;
        }
        .payment-button {
            transition: all 0.2s ease;
        }
        .payment-button:hover {
            transform: scale(1.05);
        }
        .payment-button.active {
            background-color: #10b981;
            color: white;
        }
        .gender-button {
            transition: all 0.2s ease;
        }
        .gender-button:hover {
            transform: scale(1.05);
        }
        .gender-button.active {
            background-color: #8b5cf6;
            color: white;
        }
        input[type="range"] {
            --track-color: rgba(0,0,0,0.1);
        }
        input[type="range"]::-webkit-slider-thumb {
            background-color: #3b82f6;
        }
        input[type="range"]::-moz-range-thumb {
            background-color: #3b82f6;
        }
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin: 0 auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .data-source {
            color: #22c55e;
            margin-top: 10px;
            font-size: 12px;
            text-align: right;
        }
        /* åˆ†äº«æ¨¡æ€æ¡†æ ·å¼ */
        #shareModal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .share-modal-content {
            background: white;
            border-radius: 8px;
            padding: 20px;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        .share-url-input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-right: none;
            border-radius: 4px 0 0 4px;
            font-size: 14px;
        }
        .copy-btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 0 4px 4px 0;
            cursor: pointer;
        }
        .copy-btn:hover {
            background: #2563eb;
        }
        .qrcode-container {
            width: 150px;
            height: 150px;
            background: #f8f9fa;
            border: 2px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            border-radius: 4px;
        }
        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        .modal-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .modal-btn.primary {
            background: #10b981;
            color: white;
        }
        .modal-btn.secondary {
            background: #6b7280;
            color: white;
        }
        .modal-btn:hover {
            opacity: 0.9;
        }
        /* ä¿®æ”¹æ ‡é¢˜æ ·å¼ä¸ºä¸¤è¡Œå±…ä¸­ */
        .page-title {
            text-align: center;
            line-height: 1.3;
            margin-bottom: 20px;
        }
        .title-line-1 {
            font-size: 20px;
            font-weight: bold;
            color: #1f2937;
            display: block;
        }
        .title-line-2 {
            font-size: 14px;
            font-weight: normal;
            color: #ff4444;
            display: block;
            margin-top: 8px;
            font-style: italic;
        }
        /* ç‰ˆæœ¬é“¾æ¥æ ·å¼ */
        .version-link {
            color: #3b82f6;
            text-decoration: underline;
            cursor: pointer;
            margin-left: 4px;
            font-size: 18px;
            font-weight: 600;
        }

        .version-link:hover {
            color: #2563eb;
            text-decoration: none;
        }
/* === è¡¨æ ¼é¢œè‰²ä¼˜åŒ– === */

/* 1. è¡¨å¤´æ ·å¼ï¼šè“åº•ç™½å­—åŠ ç²— */
.result-table thead th {
    background-color: #3b82f6 !important; /* è“è‰²èƒŒæ™¯ */
    color: white !important; /* ç™½è‰²æ–‡å­— */
    font-weight: 700 !important; /* åŠ ç²— */
    border-bottom: 2px solid #1e40af !important;
}

/* 2. é¦–åˆ—æ ·å¼ï¼šè“åº•ç™½å­—åŠ ç²— */
.result-table td:first-child,
.result-table th:first-child {
    background-color: #3b82f6 !important; /* è“è‰²èƒŒæ™¯ */
    color: white !important; /* ç™½è‰²æ–‡å­— */
    font-weight: 700 !important; /* åŠ ç²— */
    border-right: 2px solid #1e40af !important;
}

/* 3. å·¦ä¸Šè§’å•å…ƒæ ¼ç‰¹æ®Šå¤„ç†ï¼ˆåŒæ—¶å±äºé¦–è¡Œå’Œé¦–åˆ—ï¼‰ */
.result-table thead th:first-child {
    background-color: #1e40af !important; /* æ›´æ·±çš„è“è‰² */
    z-index: 30; /* æé«˜å±‚çº§ç¡®ä¿æ˜¾ç¤º */
}

/* 4. ç‰¹å®šå¹´ä»½è¡Œæ ·å¼ï¼šçº¢åº•ç™½å­—åŠ ç²— */
.highlight-year {
    background-color: #dc2626 !important; /* çº¢è‰²èƒŒæ™¯ */
    color: white !important; /* ç™½è‰²æ–‡å­— */
    font-weight: 700 !important; /* åŠ ç²— */
}

.highlight-year td {
    border-color: #b91c1c !important; /* æ·±çº¢è‰²è¾¹æ¡† */
}

/* 5. æœ€åä¸€åˆ—åŠ .result-table td:last-child {
.result-table td:last-child {
    font-weight: 700 !important; /* åŠ ç²— */
    font-size: 11px !important; /* ç¨å¾®åŠ å¤§å­—å· */
}

/* 6. ç¡®ä¿æ‚¬æµ®æ•ˆæœåœ¨ç‰¹æ®Šè¡Œä¸Šä¹Ÿèƒ½æ˜¾ç¤º */
.result-table tbody tr:hover:not(.highlight-year) {
    background-color: #f0f7ff !important;
}

.result-table tbody tr.highlight-year:hover {
    background-color: #ef4444 !important; /* æ‚¬æµ®æ—¶ç¨äº®çš„çº¢è‰² */
}

/* 7. å†»ç»“åˆ—åœ¨ç‰¹æ®Šè¡Œä¸­çš„æ ·å¼ */
.result-table tbody tr.highlight-year td:first-child {
    background-color: #dc2626 !important; /* é¦–åˆ—åœ¨ç‰¹æ®Šè¡Œä¸­ä¹Ÿç”¨çº¢è‰² */
    border-right-color: #b91c1c !important;
}

.result-table tbody tr:hover td:first-child:not(.highlight-year) {
    background-color: #2563eb !important; /* æ‚¬æµ®æ—¶ç¨äº®çš„è“è‰² */
}
/* æ·»åŠ åœ¨styleæ ‡ç­¾ä¸­ */
.conditional-column {
    display: table-cell;
}

/* å½“æ»¡æ»¡é™©ç§æ—¶ï¼Œéšè—ç”Ÿå­˜æ€»åˆ©ç›Šåˆ— */
.product-full .conditional-column {
    display: none;
}

/* è°ƒæ•´æ»¡æ»¡é™©ç§çš„åˆ—å®½ */
.product-full .result-table th:nth-child(4),
.product-full .result-table td:nth-child(4) {
    width: 80px; /* ç´¯è®¡ä¿é™©åˆ—ç¨å®½ */
}

.product-full .result-table th:nth-child(5),
.product-full .result-table td:nth-child(5) {
    width: 70px; /* å¹´é‡‘åˆ— */
}
    </style>
</head>
<body>
    <div id="container" class="container bg-white rounded-lg shadow-lg w-full" style="margin: 0px !important;">
        <div class="p-4">
            <!-- ä¿®æ”¹æ ‡é¢˜ä¸ºä¸¤è¡Œå±…ä¸­ -->
            <h1 class="page-title">
                <span class="title-line-1">åˆ©ç›Šæ¼”ç¤ºè¡¨<a href="javascript:void(0)" id="versionLink" class="version-link">V2.2</a></span>
                <span class="title-line-2">ä»…é™å†…éƒ¨å­¦ä¹ äº¤æµï¼Œç¦æ­¢å¤–ä¼ </span>
            </h1>

<!-- é™©ç§é€‰æ‹© - æ·»åŠ åœ¨æ€§åˆ«è¡Œä¸Šæ–¹ -->
<div class="mb-4 flex items-center">
    <label class="text-sm font-medium text-gray-700 mr-3 whitespace-nowrap" style="min-width: 60px;">
        <span class="material-icons text-sm mr-1" style="color: #666;">category</span>é™©ç§
    </label>
    <div class="flex gap-2 flex-1">
        <label class="product-button flex items-center justify-center py-2 px-3 rounded-lg border border-gray-300 text-sm font-medium transition-all cursor-pointer active flex-1 text-center" data-product="forever">
            <input type="radio" name="product" value="forever" class="hidden" checked>
            ä¹…ä¹…
        </label>
        <label class="product-button flex items-center justify-center py-2 px-3 rounded-lg border border-gray-300 text-sm font-medium transition-all cursor-pointer flex-1 text-center" data-product="full">
            <input type="radio" name="product" value="full">
            æ»¡æ»¡
        </label>
        <label class="product-button flex items-center justify-center py-2 px-3 rounded-lg border border-gray-300 text-sm font-medium transition-all cursor-pointer flex-1 text-center" data-product="year">
            <input type="radio" name="product" value="year">
            å¹´å¹´
        </label>
    </div>
</div>
            
            <!-- æ€§åˆ«é€‰æ‹© - ä¸€è¡Œæ˜¾ç¤º -->
<div class="mb-4 flex items-center">
    <label class="text-sm font-medium text-gray-700 mr-3 whitespace-nowrap" style="min-width: 60px;">
        <span class="material-icons text-sm mr-1">wc</span>æ€§åˆ«
    </label>
    <div class="flex gap-2 flex-1">
        <label class="gender-button flex items-center justify-center py-2 px-3 rounded-lg border border-gray-300 text-sm font-medium transition-all cursor-pointer flex-1 text-center" data-gender="male">
            <input type="radio" name="gender" value="male" class="hidden">
            <span class="material-icons text-sm mr-1">man</span>ç”·
        </label>
        <label class="gender-button flex items-center justify-center py-2 px-3 rounded-lg border border-gray-300 text-sm font-medium transition-all cursor-pointer active flex-1 text-center" data-gender="female">
            <input type="radio" name="gender" value="female" class="hidden" checked>
            <span class="material-icons text-sm mr-1">woman</span>å¥³
        </label>
    </div>
</div>

            <!-- æŠ•ä¿å¹´é¾„ - ä¿®æ”¹ä¸ºä¸€è¡Œæ˜¾ç¤º -->
<!-- æŠ•ä¿å¹´é¾„ - ç¡®ä¿æœ‰å›¾æ ‡ -->
<div class="mb-4 flex items-center">
    <label class="text-sm font-medium text-gray-700 mr-3 whitespace-nowrap" style="min-width: 60px;">
        <span class="material-icons text-sm mr-1" style="color: #666;">person</span>æŠ•ä¿å¹´é¾„
    </label>
    <div class="flex items-center space-x-2 flex-1">
        <input type="range" id="age" min="0" max="80" value="50" class="flex-1">
        <span id="ageValue" class="text-sm font-medium w-12 text-center">50å²</span>
    </div>
</div>

<!-- äº¤è´¹æœŸé—´é€‰æ‹© - æ·»åŠ æ•°æ®å¯ç”¨æ€§æŒ‡ç¤º -->
<div class="mb-4 flex items-center">
    <label class="text-sm font-medium text-gray-700 mr-3 whitespace-nowrap" style="min-width: 60px;">
        <span class="material-icons text-sm mr-1" style="color: #666;">schedule</span>äº¤è´¹æœŸé—´
    </label>
    <div class="flex gap-2 flex-1">
        <button class="payment-button flex items-center justify-center py-2 px-3 rounded-lg border border-gray-300 text-sm font-medium transition-all cursor-pointer flex-1 text-center relative" data-payment="3" title="3å¹´äº¤æ•°æ®ï¼ˆæš‚æœªæ”¶å½•ï¼‰">
            3å¹´
            <span class="absolute -top-1 -right-1 w-2 h-2 bg-gray-400 rounded-full" title="æ•°æ®æš‚æœªæ”¶å½•"></span>
        </button>
        <button class="payment-button flex items-center justify-center py-2 px-3 rounded-lg border border-gray-300 text-sm font-medium transition-all cursor-pointer flex-1 text-center relative" data-payment="4" title="4å¹´äº¤æ•°æ®ï¼ˆæš‚æœªæ”¶å½•ï¼‰">
            4å¹´
            <span class="absolute -top-1 -right-1 w-2 h-2 bg-gray-400 rounded-full" title="æ•°æ®æš‚æœªæ”¶å½•"></span>
        </button>
        <button class="payment-button flex items-center justify-center py-2 px-3 rounded-lg border border-gray-300 text-sm font-medium transition-all cursor-pointer active flex-1 text-center relative" data-payment="5" title="5å¹´äº¤æ•°æ®ï¼ˆå®Œæ•´æ”¶å½•ï¼‰">
            5å¹´
            <span class="absolute -top-1 -right-1 w-2 h-2 bg-green-500 rounded-full" title="æ•°æ®å®Œæ•´æ”¶å½•"></span>
        </button>
        <button class="payment-button flex items-center justify-center py-2 px-3 rounded-lg border border-gray-300 text-sm font-medium transition-all cursor-pointer flex-1 text-center relative" data-payment="6" title="6å¹´äº¤æ•°æ®ï¼ˆæš‚æœªæ”¶å½•ï¼‰">
            6å¹´
            <span class="absolute -top-1 -right-1 w-2 h-2 bg-gray-400 rounded-full" title="æ•°æ®æš‚æœªæ”¶å½•"></span>
        </button>
    </div>
</div>

            <!-- å¹´äº¤ä¿è´¹ -->
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    <span class="material-icons text-sm mr-1">payments</span>å¹´äº¤ä¿è´¹
                </label>
                
                <!-- å¿«é€Ÿé€‰æ‹©æŒ‰é’® -->
                <div class="grid grid-cols-4 gap-2 mb-3">
                    <button class="premium-button py-2 px-3 rounded-lg border border-gray-300 text-sm font-medium transition-all" data-premium="10000" data-testid="premium-10000">
                        1ä¸‡
                    </button>
                    <button class="premium-button py-2 px-3 rounded-lg border border-gray-300 text-sm font-medium transition-all" data-premium="50000" data-testid="premium-50000">
                        5ä¸‡
                    </button>
                    <button class="premium-button py-2 px-3 rounded-lg border border-gray-300 text-sm font-medium transition-all active" data-premium="100000" data-testid="premium-100000">
                        10ä¸‡
                    </button>
                    <button class="premium-button py-2 px-3 rounded-lg border border-gray-300 text-sm font-medium transition-all" data-premium="500000" data-testid="premium-500000">
                        50ä¸‡
                    </button>
                </div>
                
                <!-- è‡ªå®šä¹‰è¾“å…¥æ¡† -->
                <div class="flex items-center space-x-2">
                    <input type="number" id="customPremium" placeholder="è‡ªå®šä¹‰å¹´äº¤ä¿è´¹" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" data-testid="custom-premium">
                    <span class="text-sm text-gray-600">å…ƒ</span>
                </div>
            </div>

            <!-- è®¡ç®—æŒ‰é’® -->
            <div class="mb-6">
                <button id="calculateBtn" class="w-full bg-blue-500 text-white py-3 rounded-lg font-medium hover:bg-blue-600 transition-colors" data-testid="calculate-btn">
                    <span class="material-icons text-sm mr-1">calculate</span>è®¡ç®—åˆ©ç›Š
                </button>
            </div>

            <!-- åŠ è½½åŠ¨ç”» -->
            <div id="loading" class="loading">
                <div class="spinner"></div>
                <p class="text-gray-600 mt-2">æ­£åœ¨åŠ è½½çœŸå®æ•°æ®ï¼Œè¯·å‹¿åˆ·æ–°...</p>
            </div>

<!-- è®¡ç®—ç»“æœ -->
<div id="resultSection" class="hidden">
    <div class="flex justify-between items-center mb-3">
        <h2 class="text-lg font-bold text-gray-800">å¹´åº¦åˆ©ç›Šæ˜ç»†</h2>
        <span class="text-sm text-gray-600 bg-gray-100 px-2 py-1 rounded">å•ä½ï¼šå…ƒ</span>
    </div>

    <div class="table-container">
        <table class="result-table">
            <thead>
                <tr>
                    <th style="width: 35px; min-width: 30px;">å¹´<br>åº¦</th>
                    <th style="width: 35px; min-width: 30px;">å¹´<br>é¾„</th>
                    <th style="width: 65px; min-width: 60px;">å¹´äº¤ä¿è´¹</th>
                    <th style="width: 65px; min-width: 60px;">ç´¯è®¡ä¿è´¹</th>
                    <th style="width 75px; min-width: 60px;" class="annuity-column">å¹´é‡‘</th>
                    <th style="width: 75px; min-width: 60px;" class="bonus-column">ç´¯è®¡çº¢åˆ©</th>
                    <th style="width: 75px; min-width: 60px;">ç°é‡‘ä»·å€¼</th>
                    <th style="width: 85px; min-width: 60px;">ç”Ÿå­˜<br>æ€»åˆ©ç›Š</th>
                    <th style="width: 55px; min-width: 50px;">å¹´å¢<br>é•¿ç‡</th>
                </tr>
            </thead>
            <tbody id="resultBody">
                <!-- æ•°æ®å°†ç”±JavaScriptå¡«å…… -->
            </tbody>
        </table>
    </div>

    <div class="mb-3 flex gap-2">
        <button id="exportBtn" class="flex-1 bg-green-500 text-white py-2 px-3 rounded-lg text-sm font-medium hover:bg-green-600 transition-colors">
<span class="material-icons text-sm mr-1">download</span>å¯¼å‡ºExcel
        </button>
        <button id="shareBtn" class="flex-1 bg-green-600 text-white py-2 px-3 rounded-lg text-sm font-medium hover:bg-green-700 transition-colors">
            <span class="material-icons text-sm mr-1">share</span>å¾®ä¿¡åˆ†äº«
        </button>
    </div>

    <div class="data-source">âœ… æ•°æ®æ¥æºï¼š<span id="dataSourceText">jsonæ•°æ®åº“</span></div>
</div>
        </div>
    </div>

<!-- æ›´æ–°æ—¥å¿—æ¨¡æ€æ¡† -->
<div id="changelogModal" class="modal hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h3>æ›´æ–°æ—¥å¿—</h3>
            <span class="close-modal">&times;</span>
        </div>
        <div class="modal-body">
            <ul id="changelogList">
                <!-- æ›´æ–°æ—¥å¿—å†…å®¹å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </ul>
        </div>
        <div class="modal-footer">
            <button id="closeChangelog" class="modal-btn primary">å…³é—­</button>
        </div>
    </div>
</div>
<script>
    // å…¨å±€å˜é‡
    let insuranceDatabase = null;
    let currentProduct = 'forever';
    let currentAge = 50;
    let currentGender = 'female';
    let currentPaymentYears = 5;
    let currentAnnualPremium = 100000;

    // è¡¨æ ¼åˆ—ç»“æ„æ¨¡æ¿ - ä¿®å¤å­—ç¬¦ä¸²å¼•å·
    const productTableTemplates = {
        'forever': ['å¹´åº¦', 'å¹´é¾„', 'å¹´åº¦ä¿è´¹', 'ç´¯è®¡ä¿è´¹', 'ç°é‡‘ä»·å€¼', 'ç´¯è®¡çº¢åˆ©', 'ç”Ÿå­˜æ€»åˆ©ç›Š', 'å½“å¹´æ”¶ç›Šç‡'],
        'full': ['å¹´åº¦', 'å¹´é¾„', 'å¹´äº¤ä¿è´¹', 'ç´¯è®¡ä¿é™©', 'å¹´é‡‘', 'ç°é‡‘ä»·å€¼', 'ç”Ÿå­˜æ€»åˆ©ç›Š', 'å¹´å¢é•¿ç‡'],
        'year': ['å¹´åº¦', 'å¹´é¾„', 'å¹´äº¤ä¿è´¹', 'ç´¯è®¡ä¿è´¹', 'å…»è€å¹´é‡‘', 'ç°é‡‘ä»·å€¼', 'ç´¯è®¡çº¢åˆ©', 'ç”Ÿå­˜æ€»åˆ©ç›Š', 'å¹´å¢é•¿ç‡']
    };

// 1. åŠ è½½æ•°æ®å‡½æ•° - ä¿®æ”¹ä¸ºè¯»å–TXTæ–‡ä»¶
async function loadInsuranceData(productType = currentProduct, paymentYears = currentPaymentYears) {
    try {
        // æ ¹æ®é™©ç§å’Œäº¤è´¹æœŸé—´æ„å»ºTXTæ–‡ä»¶å
        const productNameMap = {
            'forever': 'å¹¸ç¦ä¹…ä¹…',
            'full': 'å¹¸ç¦æ»¡æ»¡', 
            'year': 'å¹¸ç¦å¹´å¹´'
        };
        // ä¿®æ”¹1ï¼šæ–‡ä»¶æ‰©å±•åæ”¹ä¸º .txt
        const fileName = `${productNameMap[productType]}_ç°é‡‘ä»·å€¼è¡¨_${paymentYears}å¹´äº¤.txt`;
        // ä¿®æ”¹2ï¼šç¡®è®¤TXTæ–‡ä»¶å­˜æ”¾çš„è·¯å¾„ï¼Œä¾‹å¦‚åœ¨ index_files/data/ ç›®å½•ä¸‹
        const dataFile = `index_files/data/${fileName}`; 
        
        console.log(`æ­£åœ¨åŠ è½½TXTæ•°æ®æ–‡ä»¶: ${dataFile}`);
        const response = await fetch(dataFile);
        if (!response.ok) {
            throw new Error(`TXTæ–‡ä»¶æœªæ‰¾åˆ°: ${fileName}`);
        }
        
        // ä¿®æ”¹3ï¼šè·å–å“åº”æ–‡æœ¬è€ŒéJSON
        const textData = await response.text();
        console.log("TXTæ–‡ä»¶åŠ è½½æˆåŠŸï¼Œå¼€å§‹è§£æ...");
        
        // æ¸…ç©ºä¹‹å‰çš„æ•°æ®åº“
        insuranceDatabase = {};

        // ä¿®æ”¹4ï¼šæ ¸å¿ƒè§£æé€»è¾‘ - å°†æ–‡æœ¬æŒ‰è¡Œåˆ†å‰²å¹¶å¤„ç†
        const lines = textData.split('\n');
        
        for (const line of lines) {
            // è·³è¿‡ç©ºè¡Œå’Œæ³¨é‡Šè¡Œï¼ˆå¦‚æœå­˜åœ¨ï¼‰
            if (line.trim() === '' || line.startsWith('//')) {
                continue;
            }
            
            // ä¿®æ”¹5ï¼šæŒ‰é€—å·åˆ†å‰²æ¯ä¸€è¡Œæ•°æ®
            const fields = line.split(',');
            // ç¡®ä¿æœ‰9ä¸ªå­—æ®µï¼ˆæ ¹æ®æ‚¨çš„æ ¼å¼ï¼‰
            if (fields.length === 9) {
                const gender = fields[0].trim();
                const applicationAge = fields[1].trim(); // æŠ•ä¿å¹´é¾„
                
                // ä¿®æ”¹6ï¼šæ„å»ºå”¯ä¸€é”®ï¼Œæ ¼å¼å¦‚ "ç”·_0"
                const dataKey = `${gender}_${applicationAge}`;
                
                // å¦‚æœè¿™ä¸ªé”®è¿˜ä¸å­˜åœ¨ï¼Œåˆå§‹åŒ–å…¶æ•°æ®ç»“æ„
                if (!insuranceDatabase[dataKey]) {
                    insuranceDatabase[dataKey] = {
                        benefit_data: [] // ä¿æŒä¸åŸJSONä¸€è‡´çš„ç»“æ„
                    };
                }
                
                // ä¿®æ”¹7ï¼šå°†å½“å‰è¡Œæ•°æ®è½¬æ¢ä¸ºå¯¹è±¡ï¼Œå¹¶å­˜å…¥ benefit_data æ•°ç»„
                // æ³¨æ„ï¼šå­—æ®µé¡ºåºéœ€ä¸æ‚¨çš„TXTæ–‡ä»¶å®Œå…¨ä¸€è‡´
                insuranceDatabase[dataKey].benefit_data.push({
                    "ä¿å•å¹´åº¦": parseFloat(fields[2]) || 0,
                    "å¹´é¾„": parseFloat(fields[3]) || 0,
                    "å¹´äº¤ä¿è´¹": parseFloat(fields[4]) || 0,
                    "ç´¯è®¡ä¿è´¹": parseFloat(fields[5]) || 0,
                    "å¹´é‡‘": parseFloat(fields[6]) || 0,
                    "ç´¯è®¡çº¢åˆ©": parseFloat(fields[7]) || 0,
                    "ç°é‡‘ä»·å€¼": parseFloat(fields[8]) || 0
                });
            }
        }

        console.log(`âœ… ${productType}_${paymentYears}å¹´äº¤TXTæ•°æ®è§£æå®Œæˆ`);
        console.log(`ğŸ“Š è§£æåæ•°æ®åº“æ ·ä¾‹:`, Object.keys(insuranceDatabase).length > 0 ? Object.keys(insuranceDatabase)[0] : "æ— æ•°æ®");
        
        return insuranceDatabase;
    } catch (error) {
        console.error('âŒ åŠ è½½æˆ–è§£æTXTæ•°æ®å¤±è´¥:', error);
        alert(`æ•°æ®åŠ è½½å¤±è´¥: ${error.message}\nè¯·æ£€æŸ¥TXTæ–‡ä»¶è·¯å¾„å’Œæ ¼å¼æ˜¯å¦æ­£ç¡®ã€‚`);
        return null;
    }
}

// 2. è®¡ç®—å™¨ç±» - ç»Ÿä¸€çš„è®¡ç®—é€»è¾‘
class InsuranceCalculator {
    calculateFromRealData(age, paymentYears, annualPremium, totalYears = 50) {
        if (!insuranceDatabase) {
            alert("æ•°æ®æœªåŠ è½½");
            return [];
        }

        const genderChinese = currentGender === 'female' ? 'å¥³' : 'ç”·';
        const ageKey = `${genderChinese}_${age}`;
        
        console.log(`ğŸ”ğŸ” æŸ¥æ‰¾æ•°æ®é”®: ${ageKey}`);
        
        if (!insuranceDatabase[ageKey]) {
            alert(`æœªæ‰¾åˆ°${genderChinese}æ€§${age}å²çš„æ•°æ®`);
            console.log(`âŒâŒ å¯ç”¨é”®å:`, Object.keys(insuranceDatabase));
            return [];
        }

        const ageData = insuranceDatabase[ageKey];
        const benefitData = ageData.benefit_data || [];
        
        console.log(`ğŸ“ˆğŸ“ˆ æ‰¾åˆ°${benefitData.length}å¹´æ•°æ®`);
        
        if (benefitData.length === 0) {
            alert("è¯¥å¹´é¾„æ®µæ— æ•°æ®");
            return [];
        }

        const results = [];
        let previousTotalBenefit = 0;
        let totalAnnuityReceived = 0;

        for (let year = 1; year <= totalYears && year <= benefitData.length; year++) {
            const realYearData = benefitData[year - 1];
            
            if (!realYearData) {
                console.log(`â¹â¹â¹ï¸ ç¬¬${year}å¹´æ— æ•°æ®ï¼Œåœæ­¢è®¡ç®—`);
                break;
            }

            // ä»JSONè·å–åŸºç¡€æ•°æ®
            const yearPremium = year <= paymentYears ? annualPremium : 0;
            const accumulatedPremium = annualPremium * Math.min(year, paymentYears);
            
            // ç»Ÿä¸€å­—æ®µå
            const annuity = Math.round((realYearData.å¹´é‡‘ || 0) * (annualPremium / 10000));
            const bonus = Math.round((realYearData.ç´¯è®¡çº¢åˆ© || 0) * (annualPremium / 10000));
            const cashValue = Math.round((realYearData.ç°é‡‘ä»·å€¼ || 0) * (annualPremium / 10000));
            
            // è®¡ç®—ç”Ÿå­˜æ€»åˆ©ç›Š
            totalAnnuityReceived += annuity;
            const totalBenefit = cashValue + bonus + totalAnnuityReceived;

            // ä¿®æ­£ï¼šåªæœ‰ç¬¬6å¹´åŠä»¥åæ‰è®¡ç®—å¢é•¿ç‡
            let growthRate = "-";
            if (year >= 6 && previousTotalBenefit > 0) {
                const profit = totalBenefit - previousTotalBenefit;
                if (accumulatedPremium > 0) {
                    const rate = (profit / accumulatedPremium) * 100;
                    growthRate = rate.toFixed(2) + "%";
                    
                    console.log(`ğŸ“ˆğŸ“ˆ ç¬¬${year}å¹´å¢é•¿ç‡è®¡ç®—:`, {
                        å½“å¹´ç”Ÿå­˜æ€»åˆ©ç›Š: totalBenefit,
                        ä¸Šå¹´ç”Ÿå­˜æ€»åˆ©ç›Š: previousTotalBenefit,
                        æ”¶ç›Šå·®é¢: profit,
                        ç´¯è®¡ä¿è´¹: accumulatedPremium,
                        æ”¶ç›Šç‡: growthRate
                    });
                }
            }
            
            // å…³é”®ä¿®æ”¹ï¼šå¿…é¡»åœ¨ä¿å­˜ç»“æœå‰æ›´æ–°previousTotalBenefit
            previousTotalBenefit = totalBenefit;

            results.push({
                year: year,
                age: age + year - 1,
                yearPremium: yearPremium,
                accumulatedPremium: accumulatedPremium,
                annuity: annuity,
                bonus: bonus,
                cashValue: cashValue,
                totalBenefit: totalBenefit,
                growthRate: growthRate,
                totalAnnuityReceived: totalAnnuityReceived
            });
            
            console.log(`ğŸ“ŠğŸ“Š ç¬¬${year}å¹´æ•°æ®:`, {
                å¹´å¢é•¿ç‡: growthRate,
                ç”Ÿå­˜æ€»åˆ©ç›Š: totalBenefit,
                ä¸Šä¸€å¹´ç”Ÿå­˜æ€»åˆ©ç›Š: previousTotalBenefit
            });
        }

        console.log(`âœ… è®¡ç®—å®Œæˆï¼Œå…±${results.length}å¹´æ•°æ®`);
        return results;
    }
}

    const calculator = new InsuranceCalculator();

    // 3. é¡µé¢åˆå§‹åŒ– - åˆå¹¶ä¸ºä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨
    document.addEventListener('DOMContentLoaded', async function() {
        console.log("é¡µé¢å¼€å§‹åˆå§‹åŒ–...");
        
        // è·å–DOMå…ƒç´ 
        const ageSlider = document.getElementById('age');
        const ageValue = document.getElementById('ageValue');
        const calculateBtn = document.getElementById('calculateBtn');
        const resultSection = document.getElementById('resultSection');
        const resultBody = document.getElementById('resultBody');
        const loading = document.getElementById('loading');

        // åŠ è½½åˆå§‹æ•°æ®
        console.log("å¼€å§‹åŠ è½½ä¿é™©æ•°æ®...");
        await loadInsuranceData();
        console.log("ä¿é™©æ•°æ®åŠ è½½å®Œæˆ");

        // ç»‘å®šå¹´é¾„æ»‘å—äº‹ä»¶
        ageSlider.addEventListener('input', function() {
            currentAge = parseInt(this.value);
            ageValue.textContent = currentAge + 'å²';
            console.log("å¹´é¾„æ”¹ä¸º:", currentAge);
        });

        // ç»‘å®šæ€§åˆ«æŒ‰é’®äº‹ä»¶
        document.querySelectorAll('.gender-button').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.gender-button').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentGender = this.dataset.gender;
                console.log("æ€§åˆ«æ”¹ä¸º:", currentGender);
            });
        });

// ç»‘å®šäº¤è´¹æœŸé—´æŒ‰é’®äº‹ä»¶ - æ”¯æŒåŠ¨æ€æ•°æ®åŠ è½½
document.querySelectorAll('.payment-button').forEach(btn => {
    btn.addEventListener('click', async function() {
        const selectedPaymentYears = parseInt(this.dataset.payment);
        
        // æ›´æ–°UIçŠ¶æ€
        document.querySelectorAll('.payment-button').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        currentPaymentYears = selectedPaymentYears;
        
        console.log("äº¤è´¹æœŸé—´æ”¹ä¸º:", currentPaymentYears, "å¹´äº¤");
        
        // ç«‹å³å°è¯•åŠ è½½å¯¹åº”æ•°æ®
        await loadInsuranceData(currentProduct, currentPaymentYears);
        
        // é‡æ–°è®¡ç®—åˆ©ç›Š
        calculateBenefits();
    });
});

        // ç»‘å®šä¿è´¹æŒ‰é’®äº‹ä»¶
        document.querySelectorAll('.premium-button').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.premium-button').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentAnnualPremium = parseInt(this.dataset.premium);
                document.getElementById('customPremium').value = '';
                console.log("å¹´äº¤ä¿è´¹æ”¹ä¸º:", currentAnnualPremium);
            });
        });

        // ç»‘å®šè‡ªå®šä¹‰ä¿è´¹è¾“å…¥äº‹ä»¶
        const customPremiumInput = document.getElementById('customPremium');
        if (customPremiumInput) {
            customPremiumInput.addEventListener('input', function() {
                if (this.value && !isNaN(this.value) && this.value > 0) {
                    document.querySelectorAll('.premium-button').forEach(btn => btn.classList.remove('active'));
                    currentAnnualPremium = parseInt(this.value);
                    console.log("è‡ªå®šä¹‰ä¿è´¹:", currentAnnualPremium);
                }
            });
        }

// ç»‘å®šé™©ç§åˆ‡æ¢ - æ”¯æŒåŠ¨æ€æ•°æ®åŠ è½½
document.querySelectorAll('.product-button').forEach(btn => {
    btn.addEventListener('click', async function() {
        document.querySelectorAll('.product-button').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        currentProduct = this.dataset.product;
        console.log("é™©ç§æ”¹ä¸º:", currentProduct);
        
        // é‡æ–°åŠ è½½å¯¹åº”æ•°æ®å¹¶è®¡ç®—
        await loadInsuranceData(currentProduct, currentPaymentYears);
        calculateBenefits();
    });
});

        // è®¡ç®—æŒ‰é’®äº‹ä»¶
        calculateBtn.addEventListener('click', calculateBenefits);

        // ç»‘å®šæ›´æ–°æ—¥å¿—äº‹ä»¶
        document.getElementById('versionLink').addEventListener('click', showChangelog);
        document.querySelector('.close-modal').addEventListener('click', closeChangelog);
        document.getElementById('closeChangelog').addEventListener('click', closeChangelog);
        
        document.getElementById('changelogModal').addEventListener('click', function(e) {
            if (e.target === this) closeChangelog();
        });

        console.log("æ‰€æœ‰äº‹ä»¶ç»‘å®šå®Œæˆï¼Œå‡†å¤‡è‡ªåŠ¨è®¡ç®—...");
        
        // è‡ªåŠ¨è®¡ç®—
        setTimeout(() => {
            console.log("å¼€å§‹è‡ªåŠ¨è®¡ç®—...");
            calculateBtn.click();
        }, 1000);
    });

// 4. è®¡ç®—åˆ©ç›Šå‡½æ•°
async function calculateBenefits() {
    console.log("å¼€å§‹è®¡ç®—åˆ©ç›Š...");
    console.log("å½“å‰å‚æ•°:", {
        é™©ç§: currentProduct,
        äº¤è´¹æœŸé—´: `${currentPaymentYears}å¹´äº¤`,
        æ€§åˆ«: currentGender,
        å¹´é¾„: currentAge,
        å¹´äº¤ä¿è´¹: currentAnnualPremium
    });
    
    const loading = document.getElementById('loading');
    const resultSection = document.getElementById('resultSection');
    const resultBody = document.getElementById('resultBody');

    loading.style.display = 'block';
    resultSection.classList.add('hidden');
    resultBody.innerHTML = '';

    // åŸºæœ¬å‚æ•°éªŒè¯
    if (currentAnnualPremium <= 0) {
        alert("âŒ å¹´äº¤ä¿è´¹å¿…é¡»å¤§äº0");
        loading.style.display = 'none';
        return;
    }
    
    if (currentAge < 0 || currentAge > 80) {
        alert("âŒ æŠ•ä¿å¹´é¾„å¿…é¡»åœ¨0-80å²ä¹‹é—´");
        loading.style.display = 'none';
        return;
    }

    console.log("æ™ºèƒ½åŠ è½½æ•°æ®...");
    const loadSuccess = await loadInsuranceData(currentProduct, currentPaymentYears);
    
    if (!loadSuccess) {
        loading.style.display = 'none';
        return;
    }

    setTimeout(() => {
        console.log("å¼€å§‹æ•°æ®è®¡ç®—...");
        const results = calculator.calculateFromRealData(currentAge, currentPaymentYears, currentAnnualPremium, 50);
        
        if (!results || results.length === 0) {
            loading.style.display = 'none';
            return;
        }
        
        console.log(`âœ… è®¡ç®—å®Œæˆï¼Œå…±${results.length}å¹´æ•°æ®`);
        
        // è®¾ç½®è¡¨æ ¼ç±»åæ§åˆ¶åˆ—æ˜¾ç¤º
        const tableContainer = document.querySelector('.table-container');
        if (tableContainer) {
            tableContainer.classList.remove('product-forever', 'product-full', 'product-year');
            tableContainer.classList.add(`product-${currentProduct}`);
        }
        
        displayResults(results);
        
        loading.style.display = 'none';
        resultSection.classList.remove('hidden');
        console.log("é¡µé¢æ›´æ–°å®Œæˆ");
    }, 300);
}
      
// é«˜äº®å…³é”®å¹´ä»½é…ç½®
const highlightYearConfig = {
    'forever': [6, 10, 15, 20, 25, 30, 35, 40,  50],  // ä¹…ä¹…ï¼šä»ç¬¬6å¹´å¼€å§‹
    'full': [5, 10, 15, 20, 25, 30, 35, 40, 45, 50],     // æ»¡æ»¡ï¼šä»ç¬¬5å¹´å¼€å§‹
    'year': [6, 10, 15, 20, 25, 30, 35, 40, 45, 50]      // å¹´å¹´ï¼šä»ç¬¬6å¹´å¼€å§‹
};

// 5. æ˜¾ç¤ºç»“æœ - ç»Ÿä¸€çš„9åˆ—è¡¨æ ¼
function displayResults(results) {
    const resultBody = document.getElementById('resultBody');
    if (!resultBody) {
        console.error("æœªæ‰¾åˆ°resultBodyå…ƒç´ ");
        return;
    }
    
    resultBody.innerHTML = '';

    if (!results || results.length === 0) {
        resultBody.innerHTML = '<tr><td colspan="9" style="text-align: center; color: #999;">æš‚æ— æ•°æ®</td></tr>';
        return;
    }

    // è®¾ç½®è¡¨æ ¼ç±»åï¼Œæ§åˆ¶åˆ—æ˜¾ç¤º/éšè—
    const tableContainer = document.querySelector('.table-container');
    if (tableContainer) {
        // ç§»é™¤æ‰€æœ‰äº§å“ç±»å
        tableContainer.classList.remove('product-forever', 'product-full', 'product-year');
        // æ·»åŠ å½“å‰äº§å“ç±»å
        tableContainer.classList.add(`product-${currentProduct}`);
    }

    // è·å–å½“å‰é™©ç§çš„é«˜äº®å¹´ä»½
    const highlightYears = highlightYearConfig[currentProduct] || highlightYearConfig.forever;
    console.log(`ğŸ¯ ${currentProduct}é™©ç§é«˜äº®å¹´ä»½:`, highlightYears);

    results.forEach((item, index) => {
        const row = document.createElement('tr');
        
        // æ ¹æ®é™©ç§é«˜äº®ä¸åŒçš„å¹´ä»½
        if (highlightYears.includes(item.year)) {
            row.classList.add('highlight-year');
            console.log(`ğŸ”´ é«˜äº®ç¬¬${item.year}å¹´`);
        }

        // æ ¼å¼åŒ–æ•°å€¼æ˜¾ç¤º
        const formatNumber = (num) => {
            return num.toLocaleString('zh-CN');
        };

        // ç»Ÿä¸€çš„9åˆ—è¡¨æ ¼ç»“æ„
        row.innerHTML = `
            <td style="text-align: center;">${item.year}</td>
            <td style="text-align: center;">${item.age}</td>
            <td style="text-align: right;">${formatNumber(item.yearPremium)}</td>
            <td style="text-align: right;">${formatNumber(item.accumulatedPremium)}</td>
            <td style="text-align: right;" class="annuity-column">${formatNumber(item.annuity)}</td>
            <td style="text-align: right;" class="bonus-column">${formatNumber(item.bonus)}</td>
            <td style="text-align: right;">${formatNumber(item.cashValue)}</td>
            <td style="text-align: right;">${formatNumber(item.totalBenefit)}</td>
            <td style="text-align: right;">${item.growthRate}</td>
        `;
        
        resultBody.appendChild(row);
    });

    // æ›´æ–°æ•°æ®æ¥æºè¯´æ˜
    updateDataSourceNote();
}

// æ›´æ–°æ•°æ®æ¥æºè¯´æ˜çš„å‡½æ•°
function updateDataSourceNote() {
    const sourceElement = document.getElementById('dataSourceText');
    if (sourceElement) {
        let sourceText = '';
        switch(currentProduct) {
            case 'forever': sourceText = 'å¹¸ç¦ä¹…ä¹…_ç°é‡‘ä»·å€¼è¡¨'; break; // ä¿®æ”¹ç¤ºä¾‹
            case 'full': sourceText = 'å¹¸ç¦æ»¡æ»¡_ç°é‡‘ä»·å€¼è¡¨'; break; // ä¿®æ”¹ç¤ºä¾‹
            case 'year': sourceText = 'å¹¸ç¦å¹´å¹´_ç°é‡‘ä»·å€¼è¡¨'; break; // ä¿®æ”¹ç¤ºä¾‹
        }
        sourceElement.textContent = sourceText;
    }
}

// æ›´æ–°æ—¥å¿—åŠŸèƒ½
const changelogData = [
    { date: "2025-12-18", content: "V2.2ä¹…ä¹…ã€æ»¡æ»¡3ã€4ã€5ã€6å¹´äº¤æ•°æ®è¡¥å…¨ã€‚TXTæ ¼å¼" },
    { date: "2025-12-15", content: "V2.1å¢åŠ æ»¡æ»¡3ã€4å¹´äº¤æ•°æ®" },
    { date: "2025-12-12", content: "V2.0å¢åŠ æ»¡æ»¡ã€å¹´å¹´ä¸¤ä¸ªé™©ç§" },
    { date: "2025-12-10", content: "V1.5ä¼˜åŒ–è¡¨æ ¼å®½åº¦å’Œé¢œè‰²" },
    { date: "2025-12-10", content: "V1.4ä¼˜åŒ–ç•Œé¢å¸ƒå±€" },
    { date: "2025-12-09", content: "V1.3æ·»åŠ æ›´æ–°æ—¥å¿—åŠŸèƒ½" },
    { date: "2025-12-03", content: "V1.2å†»ç»“è¡¨æ ¼é¦–è¡Œé¦–åˆ—" },
    { date: "2025-12-01", content: "V1.1æ·»åŠ 5å¹´äº¤å®Œæ•´æ•°æ®" }
];

function showChangelog() {
    const modal = document.getElementById('changelogModal');
    const list = document.getElementById('changelogList');
    
    if (!modal || !list) {
        console.error("æœªæ‰¾åˆ°æ›´æ–°æ—¥å¿—ç›¸å…³å…ƒç´ ");
        return;
    }
    
    list.innerHTML = '';
    changelogData.forEach(item => {
        const li = document.createElement('li');
        li.innerHTML = `<span class="changelog-date">${item.date}</span><span class="changelog-content">${item.content}</span>`;
        list.appendChild(li);
    });
    modal.classList.remove('hidden');
}

function closeChangelog() {
    const modal = document.getElementById('changelogModal');
    if (modal) {
        modal.classList.add('hidden');
    }
}
</script>
</body>
</html>
